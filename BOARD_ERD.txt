DROP SEQUENCE SEQ_USERS_USER_CODE;
CREATE SEQUENCE SEQ_USERS_USER_CODE	--회원코드 시퀀스
START WITH 1
INCREMENT BY 1
MAXVALUE 9999
NOCYCLE
NOCACHE;

DROP TABLE USERS;
CREATE TABLE USERS(		--회원 정보 테이블
	USER_CODE NUMBER NOT NULL,		 --회원코드(PK) 시퀀스로 입력
	USERID VARCHAR2(30) NOT NULL,	 --아이디(UNIQUE)
	PASSWORD VARCHAR2(100) NOT NULL, --비밀번호
	NAME VARCHAR2(100) NOT NULL,	 --사용자 이름
	CREATE_DATE DATE DEFAULT SYSDATE,--회원정보 생성일(DEFAULT SYSDATE)
	
	CONSTRAINT PK_USER_CODE PRIMARY KEY(USER_CODE),
	CONSTRAINT UNQ_USERID UNIQUE(USERID)
);
SELECT * FROM USERS;

--INSERT 기본 형식
INSERT INTO USERS 
VALUES(SEQ_USERS_USER_CODE.NEXTVAL, 'id', 'pw', 'name', SYSDATE);
---------------------------------------------------------
DROP SEQUENCE SEQ_BOARDS_BOARD_CODE;
CREATE SEQUENCE SEQ_BOARDS_BOARD_CODE	--게시판코드 시퀀스
START WITH 1
INCREMENT BY 1
MAXVALUE 9999
NOCYCLE
NOCACHE;

DROP TABLE BOARDS;
CREATE TABLE BOARDS(	--게시물정보 테이블
	BOARD_CODE NUMBER NOT NULL,	 --게시판 코드(PK) 시퀀스로 입력
	USER_CODE NUMBER NOT NULL,	 --회원코드(FK)
	TITLE VARCHAR2(300) NOT NULL,--게시물 제목
	CONTEXT CLOB, 				 --게시물 :4GB 데이터 입력 가능
	COUNT_VIEW NUMBER DEFAULT 0, --조회수 기본값 0(이클립스에서 ++ 하도록 코드!)
	CREATE_DATE DATE DEFAULT SYSDATE, --게시일 (DEFAULT SYSDATE)
	UPDATE_DATE DATE, 			 --NULLABLE : 수정시 입력되는 날짜
	
	CONSTRAINT PK_BOARD_CODE PRIMARY KEY(BOARD_CODE),
	CONSTRAINT FK_USER_CODE FOREIGN KEY(USER_CODE) REFERENCES USERS(USER_CODE)
);
SELECT * FROM BOARDS;

--INSERT 기본 형식
INSERT INTO BOARDS 
VALUES(SEQ_BOARDS_BOARD_CODE.NEXTVAL, 1, 'title', 'context', 0, SYSDATE, NULL);
---------------------------------------------------------
DROP TABLE COMMENTS;
CREATE TABLE COMMENTS(	--댓글 정보 테이블
	--PK는 BOARD_CODE 와 USER_CODE를 복합키로 해서 만들었음~!
	BOARD_CODE NUMBER REFERENCES BOARDS(BOARD_CODE),
	USER_CODE NUMBER REFERENCES USERS(USER_CODE),
	CONTEXT CLOB,					--댓글 내용 4GB
	COUNT_GOOD NUMBER DEFAULT 0,	--좋아요 (DEFULAT 0)
	COUNT_BAD NUMBER DEFAULT 0,		--싫어요 (DEFAULT 0)
	CREATE_DATE DATE DEFAULT SYSDATE,--댓글 작성 날짜
	
	CONSTRAINT SUPER_BOARD_USER PRIMARY KEY (BOARD_CODE, USER_CODE)
);
SELECT * FROM COMMENTS;

--INSERT 기본 형식
INSERT INTO COMMENTS 
VALUES(1, 1, 'context', 0, 0, SYSDATE);
---------------------------------------------------------








